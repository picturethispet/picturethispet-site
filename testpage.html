<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Acuity Embed Test | Picture This Pet</title>
  <style>
    :root {
      --gradient-primary: linear-gradient(135deg, #ff1493 0%, #8a2be2 50%, #ff8c00 100%);
      --color-primary: #1a1a1a;
      --color-secondary: #2a2a2a;
      --color-text-light: #f0f0f0;
      --color-text-muted: #b0b0b0;
      --color-accent-orange: #ff8c00;
      --color-accent-pink: #ff1493;
      --border-subtle: 1px solid rgba(255, 255, 255, 0.08);
      --shadow-medium: 0 8px 30px rgba(0, 0, 0, 0.4);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Inter', sans-serif;
      background: var(--color-primary);
      color: var(--color-text-light);
      line-height: 1.6;
      padding: 2rem;
      min-height: 100vh;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
    }

    .header {
      text-align: center;
      margin-bottom: 3rem;
    }

    .title {
      font-size: 2.5rem;
      font-weight: 800;
      background: var(--gradient-primary);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 1rem;
    }

    .subtitle {
      font-size: 1.2rem;
      color: var(--color-text-muted);
      margin-bottom: 2rem;
    }

    .test-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 2rem;
      margin-bottom: 3rem;
    }

    .test-panel {
      background: var(--color-secondary);
      border-radius: 16px;
      padding: 2rem;
      border: var(--border-subtle);
      box-shadow: var(--shadow-medium);
    }

    .panel-title {
      font-size: 1.4rem;
      font-weight: 700;
      color: var(--color-accent-orange);
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .panel-description {
      color: var(--color-text-muted);
      margin-bottom: 1.5rem;
      font-size: 0.95rem;
      line-height: 1.5;
    }

    .iframe-container {
      background: #fff;
      border-radius: 12px;
      overflow: hidden;
      border: 2px solid var(--color-accent-orange);
      position: relative;
      min-height: 500px;
    }

    .iframe-container iframe {
      width: 100%;
      min-height: 500px;
      border: none;
      display: block;
    }

    .loading-overlay {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(42, 42, 42, 0.9);
      color: var(--color-text-light);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.1rem;
      font-weight: 600;
      z-index: 10;
      transition: opacity 0.3s ease;
    }

    .loading-overlay.hidden {
      opacity: 0;
      pointer-events: none;
    }

    .url-display {
      background: rgba(0, 0, 0, 0.3);
      border-radius: 8px;
      padding: 1rem;
      margin-bottom: 1rem;
      font-family: 'Courier New', monospace;
      font-size: 0.85rem;
      color: var(--color-accent-pink);
      word-break: break-all;
      line-height: 1.4;
    }

    .status-indicator {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      font-size: 0.9rem;
      margin-top: 1rem;
    }

    .status-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: var(--color-text-muted);
    }

    .status-dot.loading {
      background: var(--color-accent-orange);
      animation: pulse 1.5s infinite;
    }

    .status-dot.success {
      background: #10b981;
    }

    .status-dot.error {
      background: #ef4444;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    .comparison-results {
      background: var(--color-secondary);
      border-radius: 16px;
      padding: 2rem;
      border: var(--border-subtle);
      margin-top: 2rem;
    }

    .comparison-title {
      font-size: 1.3rem;
      font-weight: 700;
      color: var(--color-text-light);
      margin-bottom: 1rem;
      text-align: center;
    }

    .result-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 2rem;
    }

    .result-item {
      text-align: center;
      padding: 1rem;
      border-radius: 8px;
      background: rgba(255, 255, 255, 0.05);
    }

    .result-title {
      font-weight: 600;
      margin-bottom: 0.5rem;
    }

    .result-status {
      font-size: 0.9rem;
      padding: 0.5rem 1rem;
      border-radius: 20px;
      display: inline-block;
      margin-top: 0.5rem;
    }

    .result-status.pending {
      background: rgba(255, 140, 0, 0.2);
      color: var(--color-accent-orange);
    }

    .result-status.success {
      background: rgba(16, 185, 129, 0.2);
      color: #10b981;
    }

    .result-status.error {
      background: rgba(239, 68, 68, 0.2);
      color: #ef4444;
    }

    @media (max-width: 768px) {
      .test-grid,
      .result-grid {
        grid-template-columns: 1fr;
      }
      
      .container {
        padding: 1rem;
      }
      
      .title {
        font-size: 2rem;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1 class="title">üß™ Acuity Embed Code Test</h1>
      <p class="subtitle">Testing Mini Session - Cheesman Park - 1 Pet - 1 Person (ID: 78805731)</p>
    </div>

    <div class="test-grid">
      <!-- Method 1: Direct URL (Current) -->
      <div class="test-panel">
        <h2 class="panel-title">
          üîó Method 1: Direct URL
        </h2>
        <p class="panel-description">
          Your current approach - loading the Acuity URL directly in an iframe
        </p>
        
        <div class="url-display">
          https://app.acuityscheduling.com/schedule.php?owner=35886698&appointmentType=78805731
        </div>
        
        <div class="iframe-container">
          <div class="loading-overlay" id="loading1">
            üîÑ Loading direct URL method...
          </div>
          <iframe 
            id="directIframe"
            src="https://app.acuityscheduling.com/schedule.php?owner=35886698&appointmentType=78805731"
            width="100%" 
            height="500"
            frameBorder="0">
          </iframe>
        </div>
        
        <div class="status-indicator">
          <div class="status-dot loading" id="status1"></div>
          <span id="statusText1">Loading...</span>
        </div>
      </div>

      <!-- Method 2: Embed Code (Recommended) -->
      <div class="test-panel">
        <h2 class="panel-title">
          ‚ú® Method 2: Official Embed Code
        </h2>
        <p class="panel-description">
          Acuity's official embed code with proper scripts and configuration
        </p>
        
        <div class="url-display">
          Acuity embed code + https://embed.acuityscheduling.com/js/embed.js
        </div>
        
        <div class="iframe-container">
          <div class="loading-overlay" id="loading2">
            üîÑ Loading embed code method...
          </div>
          <iframe 
            id="embedIframe"
            src="https://app.acuityscheduling.com/schedule.php?owner=35886698&appointmentType=78805731" 
            width="100%" 
            height="500" 
            frameBorder="0">
          </iframe>
        </div>
        
        <div class="status-indicator">
          <div class="status-dot loading" id="status2"></div>
          <span id="statusText2">Loading...</span>
        </div>
      </div>
    </div>

    <div class="comparison-results">
      <h3 class="comparison-title">üìä Test Results Comparison</h3>
      <div class="result-grid">
        <div class="result-item">
          <div class="result-title">Direct URL Method</div>
          <div class="result-status pending" id="result1">Testing...</div>
        </div>
        <div class="result-item">
          <div class="result-title">Official Embed Code</div>
          <div class="result-status pending" id="result2">Testing...</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Load Acuity's embed script -->
  <script src="https://embed.acuityscheduling.com/js/embed.js" type="text/javascript"></script>
  
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      console.log('üß™ Starting Acuity embed code test...');
      
      // Track loading states
      let directLoaded = false;
      let embedLoaded = false;
      
      // Direct iframe (Method 1)
      const directIframe = document.getElementById('directIframe');
      const loading1 = document.getElementById('loading1');
      const status1 = document.getElementById('status1');
      const statusText1 = document.getElementById('statusText1');
      const result1 = document.getElementById('result1');
      
      // Embed iframe (Method 2)  
      const embedIframe = document.getElementById('embedIframe');
      const loading2 = document.getElementById('loading2');
      const status2 = document.getElementById('status2');
      const statusText2 = document.getElementById('statusText2');
      const result2 = document.getElementById('result2');
      
      // Method 1: Direct URL events
      directIframe.addEventListener('load', function() {
        console.log('‚úÖ Direct iframe loaded');
        directLoaded = true;
        loading1.classList.add('hidden');
        status1.classList.remove('loading');
        status1.classList.add('success');
        statusText1.textContent = 'Loaded successfully';
        result1.textContent = 'Loaded ‚úÖ';
        result1.classList.remove('pending');
        result1.classList.add('success');
        
        // Check if the content shows an error
        setTimeout(checkDirectIframeContent, 2000);
      });
      
      directIframe.addEventListener('error', function() {
        console.log('‚ùå Direct iframe error');
        loading1.classList.add('hidden');
        status1.classList.remove('loading');
        status1.classList.add('error');
        statusText1.textContent = 'Failed to load';
        result1.textContent = 'Failed ‚ùå';
        result1.classList.remove('pending');
        result1.classList.add('error');
      });
      
      // Method 2: Embed code events
      embedIframe.addEventListener('load', function() {
        console.log('‚úÖ Embed iframe loaded');
        embedLoaded = true;
        loading2.classList.add('hidden');
        status2.classList.remove('loading');
        status2.classList.add('success');
        statusText2.textContent = 'Loaded successfully';
        result2.textContent = 'Loaded ‚úÖ';
        result2.classList.remove('pending');
        result2.classList.add('success');
        
        // Check if the content shows an error
        setTimeout(checkEmbedIframeContent, 2000);
      });
      
      embedIframe.addEventListener('error', function() {
        console.log('‚ùå Embed iframe error');
        loading2.classList.add('hidden');
        status2.classList.remove('loading');
        status2.classList.add('error');
        statusText2.textContent = 'Failed to load';
        result2.textContent = 'Failed ‚ùå';
        result2.classList.remove('pending');
        result2.classList.add('error');
      });
      
      // Function to check if iframe content shows errors
      function checkDirectIframeContent() {
        try {
          // Note: Due to CORS, we can't access iframe content directly
          // But we can observe behavior patterns
          console.log('üîç Checking direct iframe content...');
          
          // If iframe is very short, it might be an error
          const iframeHeight = directIframe.contentWindow?.document?.body?.scrollHeight;
          if (iframeHeight && iframeHeight < 200) {
            console.log('‚ö†Ô∏è Direct iframe appears to show error (short height)');
            statusText1.textContent = 'May show error message';
            result1.textContent = 'Possible Error ‚ö†Ô∏è';
            result1.classList.remove('success');
            result1.classList.add('error');
          }
        } catch (e) {
          console.log('‚ÑπÔ∏è Cannot access iframe content (CORS)');
        }
      }
      
      function checkEmbedIframeContent() {
        try {
          console.log('üîç Checking embed iframe content...');
          
          // Same check for embed iframe
          const iframeHeight = embedIframe.contentWindow?.document?.body?.scrollHeight;
          if (iframeHeight && iframeHeight < 200) {
            console.log('‚ö†Ô∏è Embed iframe appears to show error (short height)');
            statusText2.textContent = 'May show error message';
            result2.textContent = 'Possible Error ‚ö†Ô∏è';
            result2.classList.remove('success');
            result2.classList.add('error');
          }
        } catch (e) {
          console.log('‚ÑπÔ∏è Cannot access iframe content (CORS)');
        }
      }
      
      // Timeout handlers
      setTimeout(function() {
        if (!directLoaded) {
          console.log('‚è±Ô∏è Direct iframe timeout');
          loading1.classList.add('hidden');
          status1.classList.remove('loading');
          status1.classList.add('error');
          statusText1.textContent = 'Timeout';
          result1.textContent = 'Timeout ‚è±Ô∏è';
          result1.classList.remove('pending');
          result1.classList.add('error');
        }
      }, 10000);
      
      setTimeout(function() {
        if (!embedLoaded) {
          console.log('‚è±Ô∏è Embed iframe timeout');
          loading2.classList.add('hidden');
          status2.classList.remove('loading');
          status2.classList.add('error');
          statusText2.textContent = 'Timeout';
          result2.textContent = 'Timeout ‚è±Ô∏è';
          result2.classList.remove('pending');
          result2.classList.add('error');
        }
      }, 10000);
      
      console.log('‚úÖ Test page initialized');
    });
  </script>
</body>
</html>
