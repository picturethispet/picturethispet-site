<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Admin Dashboard | Picture This Pet</title>
  <meta name="description" content="Complete business management dashboard for Picture This Pet photography studio.">
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Inter:wght@400;600&display=swap" rel="stylesheet" />

  <style>
    :root {
      --orange: #F47C2C;
      --gold: #FDB75E;
      --dark-brown: #4B2E1E;
      --available-green: #10b981;
      --booked-red: #ef4444;
      --soft-hold-yellow: #f59e0b;
      --admin-purple: #8b5cf6;
      --admin-blue: #3b82f6;
      --dark-bg: #0f0f0f;
      --card-bg: rgba(255, 255, 255, 0.05);
      --border-color: rgba(255, 255, 255, 0.1);
      --text-primary: #ffffff;
      --text-secondary: rgba(255, 255, 255, 0.8);
      --text-muted: rgba(255, 255, 255, 0.6);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    html, body {
      overflow-x: hidden;
      scrollbar-width: thin;
      scrollbar-color: rgba(255, 255, 255, 0.3) transparent;
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--dark-bg);
      color: var(--text-primary);
    }
    
    html::-webkit-scrollbar {
      width: 8px;
    }
    
    html::-webkit-scrollbar-track {
      background: transparent;
    }
    
    html::-webkit-scrollbar-thumb {
      background: rgba(255, 255, 255, 0.3);
      border-radius: 4px;
    }

    @keyframes moveBackground {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.7; }
    }

    @keyframes slideInRight {
      from {
        transform: translateX(100%);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }

    @keyframes bounce {
      0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
      40% { transform: translateY(-10px); }
      60% { transform: translateY(-5px); }
    }

    /* === LAYOUT === */
    .admin-layout {
      display: grid;
      grid-template-columns: 280px 1fr;
      grid-template-rows: auto 1fr;
      min-height: 100vh;
      background-image: url("assets/images/main_background_allsystem.png");
      background-size: 100% 100%;
      background-position: center;
      animation: moveBackground 30s ease-in-out infinite;
    }

    /* === HEADER === */
    .admin-header {
      grid-column: 1 / -1;
      background-image: url('assets/images/ani_bkgd_cool.png');
      background-size: 100% 100%;
      background-position: center;
      animation: moveBackground 30s ease-in-out infinite;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1rem 2rem;
      backdrop-filter: blur(12px);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
      border-bottom: 1px solid var(--border-color);
      z-index: 1000;
      position: sticky;
      top: 0;
    }

    .header-left {
      display: flex;
      align-items: center;
      gap: 2rem;
    }

    .logo-small {
      height: 50px;
      transition: all 0.3s ease;
    }

    .logo-small:hover {
      transform: scale(1.05);
    }

    .header-title {
      font-family: 'Playfair Display', serif;
      font-size: 1.8rem;
      font-weight: 700;
      color: var(--text-primary);
    }

    .header-right {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .sync-status {
      background: var(--card-bg);
      padding: 0.5rem 1rem;
      border-radius: 20px;
      font-size: 0.85rem;
      border: 1px solid var(--border-color);
      display: flex;
      align-items: center;
      gap: 0.5rem;
      backdrop-filter: blur(10px);
    }

    .sync-indicator {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: var(--available-green);
      animation: pulse 2s infinite;
    }

    .admin-user {
      background: var(--card-bg);
      padding: 0.8rem 1.5rem;
      border-radius: 25px;
      font-size: 0.9rem;
      font-weight: 600;
      color: var(--text-primary);
      border: 1px solid var(--border-color);
      backdrop-filter: blur(10px);
    }

    .logout-btn {
      background: var(--card-bg);
      color: var(--text-primary);
      border: 1px solid var(--border-color);
      padding: 0.7rem 1.2rem;
      border-radius: 8px;
      font-size: 0.9rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      backdrop-filter: blur(10px);
    }

    .logout-btn:hover {
      background: rgba(255, 255, 255, 0.15);
      transform: translateY(-1px);
    }

    /* === SIDEBAR === */
    .admin-sidebar {
      background-image: url('assets/images/ani_bkgd_cool.png');
      background-size: 100% 100%;
      background-position: center;
      animation: moveBackground 30s ease-in-out infinite;
      backdrop-filter: blur(12px);
      border-right: 1px solid var(--border-color);
      padding: 2rem 0;
      overflow-y: auto;
      position: sticky;
      top: 0;
      height: 100vh;
    }

    .nav-section {
      margin-bottom: 2rem;
    }

    .nav-section-title {
      font-size: 0.85rem;
      font-weight: 600;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.5px;
      padding: 0 1.5rem;
      margin-bottom: 0.5rem;
    }

    .nav-item {
      display: flex;
      align-items: center;
      gap: 1rem;
      padding: 1rem 1.5rem;
      color: var(--text-secondary);
      cursor: pointer;
      transition: all 0.3s ease;
      border-left: 3px solid transparent;
      text-decoration: none;
      position: relative;
    }

    .nav-item:hover {
      background: rgba(255, 255, 255, 0.1);
      color: var(--text-primary);
      transform: translateX(5px);
    }

    .nav-item.active {
      background: rgba(255, 255, 255, 0.15);
      color: var(--text-primary);
      border-left-color: var(--gold);
      transform: translateX(5px);
    }

    .nav-icon {
      font-size: 1.2rem;
      width: 20px;
      text-align: center;
    }

    .nav-badge {
      background: var(--booked-red);
      color: white;
      font-size: 0.7rem;
      padding: 0.2rem 0.5rem;
      border-radius: 10px;
      margin-left: auto;
      min-width: 18px;
      text-align: center;
      animation: bounce 2s infinite;
    }

    .nav-badge.success {
      background: var(--available-green);
    }

    .nav-badge.warning {
      background: var(--soft-hold-yellow);
    }

    /* === MAIN CONTENT === */
    .admin-main {
      padding: 2rem;
      overflow-y: auto;
      max-height: calc(100vh - 100px);
      animation: fadeInUp 0.6s ease-out;
    }

    /* === CARDS === */
    .admin-card {
      background-image: url('assets/images/ani_bkgd_cool.png');
      background-size: 100% 100%;
      background-position: center;
      animation: moveBackground 30s ease-in-out infinite;
      border-radius: 24px;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
      padding: 2rem;
      color: var(--text-primary);
      backdrop-filter: blur(12px);
      border: 1px solid var(--border-color);
      margin-bottom: 2rem;
      transition: all 0.3s ease;
    }

    .admin-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 25px 50px rgba(0, 0, 0, 0.4);
    }

    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 2rem;
    }

    .card-title {
      font-family: 'Playfair Display', serif;
      font-size: 1.8rem;
      font-weight: 700;
      color: var(--text-primary);
    }

    .card-actions {
      display: flex;
      gap: 0.5rem;
    }

    /* === BUTTONS === */
    .btn {
      padding: 0.8rem 1.5rem;
      border: none;
      border-radius: 8px;
      font-size: 0.95rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      backdrop-filter: blur(10px);
    }

    .btn-primary {
      background: linear-gradient(135deg, var(--orange), var(--gold));
      color: white;
      box-shadow: 0 4px 15px rgba(244, 124, 44, 0.3);
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(244, 124, 44, 0.4);
    }

    .btn-secondary {
      background: var(--card-bg);
      color: var(--text-primary);
      border: 1px solid var(--border-color);
    }

    .btn-secondary:hover {
      background: rgba(255, 255, 255, 0.15);
      transform: translateY(-1px);
    }

    .btn-small {
      padding: 0.5rem 1rem;
      font-size: 0.85rem;
    }

    /* === DASHBOARD STATS === */
    .dashboard-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 1.5rem;
      margin-bottom: 2rem;
    }

    .stat-card {
      background: var(--card-bg);
      border-radius: 16px;
      padding: 2rem;
      border: 1px solid var(--border-color);
      text-align: center;
      transition: all 0.3s ease;
      backdrop-filter: blur(10px);
      position: relative;
      overflow: hidden;
    }

    .stat-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: linear-gradient(90deg, var(--orange), var(--gold));
    }

    .stat-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
    }

    .stat-number {
      font-size: 2.5rem;
      font-weight: 700;
      color: var(--gold);
      margin-bottom: 0.5rem;
      font-family: 'Playfair Display', serif;
    }

    .stat-label {
      font-size: 1rem;
      color: var(--text-secondary);
      font-weight: 500;
    }

    .stat-change {
      font-size: 0.8rem;
      margin-top: 0.5rem;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.3rem;
    }

    .stat-change.positive {
      color: var(--available-green);
    }

    .stat-change.negative {
      color: var(--booked-red);
    }

    /* === RECENT ACTIVITIES === */
    .recent-activities {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 2rem;
    }

    .activity-list {
      max-height: 400px;
      overflow-y: auto;
    }

    .activity-item {
      background: var(--card-bg);
      border-radius: 12px;
      padding: 1.5rem;
      border: 1px solid var(--border-color);
      margin-bottom: 1rem;
      transition: all 0.3s ease;
      backdrop-filter: blur(10px);
    }

    .activity-item:hover {
      background: rgba(255, 255, 255, 0.08);
      transform: translateX(5px);
    }

    .activity-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 0.5rem;
    }

    .activity-title {
      font-weight: 600;
      color: var(--text-primary);
    }

    .activity-time {
      font-size: 0.8rem;
      color: var(--text-muted);
    }

    .activity-description {
      font-size: 0.9rem;
      color: var(--text-secondary);
      line-height: 1.4;
    }

    .activity-status {
      display: inline-block;
      padding: 0.2rem 0.8rem;
      border-radius: 12px;
      font-size: 0.7rem;
      font-weight: 600;
      text-transform: uppercase;
      margin-top: 0.5rem;
    }

    .activity-status.pending {
      background: rgba(245, 158, 11, 0.2);
      color: var(--soft-hold-yellow);
    }

    .activity-status.completed {
      background: rgba(16, 185, 129, 0.2);
      color: var(--available-green);
    }

    .activity-status.urgent {
      background: rgba(239, 68, 68, 0.2);
      color: var(--booked-red);
    }

    /* === QUICK ACTIONS === */
    .quick-actions {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1rem;
      margin-top: 2rem;
    }

    .quick-action-card {
      background: var(--card-bg);
      border-radius: 16px;
      padding: 1.5rem;
      border: 1px solid var(--border-color);
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
      backdrop-filter: blur(10px);
      text-decoration: none;
      color: inherit;
    }

    .quick-action-card:hover {
      background: rgba(255, 255, 255, 0.1);
      transform: translateY(-3px);
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
    }

    .quick-action-icon {
      font-size: 2rem;
      margin-bottom: 1rem;
      color: var(--gold);
    }

    .quick-action-title {
      font-size: 1rem;
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: 0.5rem;
    }

    .quick-action-desc {
      font-size: 0.8rem;
      color: var(--text-muted);
    }

    /* === NOTIFICATIONS === */
    .notification {
      position: fixed;
      top: 20px;
      right: 20px;
      background: var(--available-green);
      color: white;
      padding: 1rem 1.5rem;
      border-radius: 8px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      z-index: 5000;
      transform: translateX(400px);
      transition: transform 0.3s ease;
      backdrop-filter: blur(10px);
    }

    .notification.show {
      transform: translateX(0);
      animation: slideInRight 0.3s ease-out;
    }

    .notification.error {
      background: var(--booked-red);
    }

    .notification.warning {
      background: var(--soft-hold-yellow);
    }

    .notification.info {
      background: var(--admin-blue);
    }

    /* === RESPONSIVE === */
    @media (max-width: 1024px) {
      .admin-layout {
        grid-template-columns: 60px 1fr;
      }

      .admin-sidebar {
        padding: 1rem 0;
      }

      .nav-item {
        padding: 1rem 0.8rem;
        justify-content: center;
      }

      .nav-item span:not(.nav-icon) {
        display: none;
      }

      .nav-section-title {
        display: none;
      }

      .nav-badge {
        position: absolute;
        top: 0.5rem;
        right: 0.5rem;
      }

      .recent-activities {
        grid-template-columns: 1fr;
      }

      .dashboard-stats {
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      }
    }

    @media (max-width: 768px) {
      .admin-layout {
        grid-template-columns: 1fr;
        grid-template-rows: auto auto 1fr;
      }

      .admin-sidebar {
        background: rgba(0, 0, 0, 0.95);
        position: fixed;
        top: 0;
        left: -100%;
        width: 280px;
        height: 100vh;
        z-index: 5000;
        transition: left 0.3s ease;
      }

      .admin-sidebar.open {
        left: 0;
      }

      .mobile-menu-btn {
        display: block !important;
        background: none;
        border: none;
        color: var(--text-primary);
        font-size: 1.5rem;
        cursor: pointer;
      }

      .header-title {
        font-size: 1.4rem;
      }

      .admin-main {
        padding: 1rem;
      }

      .quick-actions {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <div class="admin-layout">
    <!-- Header -->
    <header class="admin-header">
      <div class="header-left">
        <button class="mobile-menu-btn" onclick="toggleSidebar()" style="display: none;">‚ò∞</button>
        <img src="assets/images/headerlogowarm.png" alt="PictureThisPet Logo" class="logo-small" />
        <h1 class="header-title">Studio Manager</h1>
      </div>
      <div class="header-right">
        <div class="sync-status">
          <div class="sync-indicator" id="syncIndicator"></div>
          <span id="syncStatus">Live & Synced</span>
        </div>
        <div class="admin-user" id="adminUser">Welcome, Admin</div>
        <button class="logout-btn" onclick="logout()">Logout</button>
      </div>
    </header>

    <!-- Sidebar Navigation -->
    <nav class="admin-sidebar" id="adminSidebar">
      <div class="nav-section">
        <div class="nav-section-title">Overview</div>
        <a href="admin.html" class="nav-item active">
          <span class="nav-icon">üìä</span>
          <span>Dashboard</span>
        </a>
        <a href="calendar-management.html" class="nav-item">
          <span class="nav-icon">üìÖ</span>
          <span>Calendar</span>
          <span class="nav-badge" id="calendarBadge">3</span>
        </a>
      </div>

      <div class="nav-section">
        <div class="nav-section-title">Management</div>
        <a href="client-session-management.html" class="nav-item">
          <span class="nav-icon">üë•</span>
          <span>Clients & Sessions</span>
        </a>
        <a href="gallery-management.html" class="nav-item">
          <span class="nav-icon">üñºÔ∏è</span>
          <span>Gallery</span>
          <span class="nav-badge success" id="galleryBadge">8</span>
        </a>
      </div>

      <div class="nav-section">
        <div class="nav-section-title">Business</div>
        <a href="business-management.html" class="nav-item">
          <span class="nav-icon">üìà</span>
          <span>Analytics</span>
        </a>
      </div>
    </nav>

    <!-- Main Content -->
    <main class="admin-main">
      <!-- Dashboard Statistics -->
      <div class="dashboard-stats">
        <div class="stat-card">
          <div class="stat-number" id="monthlySessionsCount">12</div>
          <div class="stat-label">Sessions This Month</div>
          <div class="stat-change positive">
            <span>‚Üó</span> +12% from last month
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-number" id="monthlyRevenue">$3,200</div>
          <div class="stat-label">Monthly Revenue</div>
          <div class="stat-change positive">
            <span>‚Üó</span> +18% from last month
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-number" id="activeGalleriesCount">8</div>
          <div class="stat-label">Active Galleries</div>
          <div class="stat-change positive">
            <span>‚Üó</span> +3 new this week
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-number" id="totalClientsCount">24</div>
          <div class="stat-label">Total Clients</div>
          <div class="stat-change positive">
            <span>‚Üó</span> +5 new this month
          </div>
        </div>
      </div>

      <!-- Recent Activities -->
      <div class="recent-activities">
        <!-- Upcoming Sessions -->
        <div class="admin-card">
          <div class="card-header">
            <h2 class="card-title">Upcoming Sessions</h2>
            <div class="card-actions">
              <button class="btn btn-secondary btn-small" onclick="refreshSessions()">üîÑ Refresh</button>
              <a href="calendar-management.html" class="btn btn-primary btn-small">+ Add Session</a>
            </div>
          </div>
          
          <div class="activity-list" id="upcomingSessions">
            <div class="activity-item">
              <div class="activity-header">
                <div class="activity-title">Sarah Johnson - Full Session</div>
                <div class="activity-time">Today, 6:00 PM</div>
              </div>
              <div class="activity-description">Cheesman Park ‚Ä¢ 2 pets (Buffy & Max) ‚Ä¢ Special requests: Buffy can be shy</div>
              <div class="activity-status pending">Today</div>
            </div>
            
            <div class="activity-item">
              <div class="activity-header">
                <div class="activity-title">Mike Chen - Mini Session</div>
                <div class="activity-time">Tomorrow, 5:00 PM</div>
              </div>
              <div class="activity-description">City Park ‚Ä¢ 1 pet (Rocky) ‚Ä¢ Standard session</div>
              <div class="activity-status pending">Tomorrow</div>
            </div>
            
            <div class="activity-item">
              <div class="activity-header">
                <div class="activity-title">Lisa Rodriguez - Holiday Session</div>
                <div class="activity-time">Dec 24, 4:30 PM</div>
              </div>
              <div class="activity-description">Washington Park ‚Ä¢ 1 pet (Luna) ‚Ä¢ Holiday themed</div>
              <div class="activity-status pending">Upcoming</div>
            </div>
          </div>
        </div>

        <!-- Pending Actions -->
        <div class="admin-card">
          <div class="card-header">
            <h2 class="card-title">Pending Actions</h2>
            <div class="card-actions">
              <button class="btn btn-secondary btn-small" onclick="refreshActions()">üîÑ Refresh</button>
              <button class="btn btn-secondary btn-small" onclick="markAllComplete()">‚úì Mark All Complete</button>
            </div>
          </div>
          
          <div class="activity-list" id="pendingActions">
            <div class="activity-item">
              <div class="activity-header">
                <div class="activity-title">Upload Photos</div>
                <div class="activity-time">Sarah Johnson</div>
              </div>
              <div class="activity-description">Session completed yesterday - 24 photos ready for upload</div>
              <div class="activity-status urgent">High Priority</div>
            </div>
            
            <div class="activity-item">
              <div class="activity-header">
                <div class="activity-title">Send Gallery Access</div>
                <div class="activity-time">Mike Chen</div>
              </div>
              <div class="activity-description">Gallery created with 15 photos - ready to send credentials</div>
              <div class="activity-status pending">Pending</div>
            </div>
            
            <div class="activity-item">
              <div class="activity-header">
                <div class="activity-title">Invoice Payment</div>
                <div class="activity-time">Lisa Rodriguez</div>
              </div>
              <div class="activity-description">Full session invoice sent - payment pending</div>
              <div class="activity-status pending">Follow Up</div>
            </div>
            
            <div class="activity-item">
              <div class="activity-header">
                <div class="activity-title">Calendar Sync</div>
                <div class="activity-time">System</div>
              </div>
              <div class="activity-description">3 new bookings from website need to be confirmed</div>
              <div class="activity-status urgent">Action Needed</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Quick Actions -->
      <div class="admin-card">
        <div class="card-header">
          <h2 class="card-title">Quick Actions</h2>
          <p style="color: var(--text-muted); font-size: 0.9rem;">Common tasks and shortcuts</p>
        </div>
        
        <div class="quick-actions">
          <a href="calendar-management.html" class="quick-action-card">
            <div class="quick-action-icon">üìÖ</div>
            <div class="quick-action-title">Schedule Session</div>
            <div class="quick-action-desc">Add new photography session to calendar</div>
          </a>
          
          <a href="gallery-management.html" class="quick-action-card">
            <div class="quick-action-icon">üì∏</div>
            <div class="quick-action-title">Upload Photos</div>
            <div class="quick-action-desc">Add photos to client galleries</div>
          </a>
          
          <a href="client-session-management.html" class="quick-action-card">
            <div class="quick-action-icon">üë§</div>
            <div class="quick-action-title">Manage Clients</div>
            <div class="quick-action-desc">View and edit client information</div>
          </a>
          
          <a href="business-management.html" class="quick-action-card">
            <div class="quick-action-icon">üìä</div>
            <div class="quick-action-title">View Analytics</div>
            <div class="quick-action-desc">Business insights and reports</div>
          </a>
          
          <div class="quick-action-card" onclick="createBackup()">
            <div class="quick-action-icon">üíæ</div>
            <div class="quick-action-title">Backup Data</div>
            <div class="quick-action-desc">Export and backup all business data</div>
          </div>
          
          <div class="quick-action-card" onclick="sendReminders()">
            <div class="quick-action-icon">üìß</div>
            <div class="quick-action-title">Send Reminders</div>
            <div class="quick-action-desc">Email session reminders to clients</div>
          </div>
        </div>
      </div>
    </main>
  </div>

  <script>
    // ===== DATA MANAGEMENT =====
    
    // Initialize data storage with sample data
    function initializeData() {
      // Sessions data
      if (!localStorage.getItem('ptpAdminSessions')) {
        const sampleSessions = [
          {
            id: 'session_1',
            clientName: 'Sarah Johnson',
            date: '2024-12-22',
            time: '18:00',
            sessionType: 'Full Session',
            location: 'Cheesman Park',
            email: 'sarah.johnson@email.com',
            phone: '(303) 555-0123',
            pets: ['Buffy', 'Max'],
            notes: 'Buffy can be shy at first, Max is great with directions',
            status: 'scheduled',
            price: 250,
            created: new Date().toISOString()
          },
          {
            id: 'session_2',
            clientName: 'Mike Chen',
            date: '2024-12-23',
            time: '17:00',
            sessionType: 'Mini Session',
            location: 'City Park',
            email: 'mike.chen@email.com',
            phone: '(303) 555-0456',
            pets: ['Rocky'],
            notes: 'Standard mini session',
            status: 'scheduled',
            price: 150,
            created: new Date().toISOString()
          },
          {
            id: 'session_3',
            clientName: 'Lisa Rodriguez',
            date: '2024-12-24',
            time: '16:30',
            sessionType: 'Holiday Session',
            location: 'Washington Park',
            email: 'lisa.rodriguez@email.com',
            phone: '(303) 555-0789',
            pets: ['Luna'],
            notes: 'Holiday themed photos',
            status: 'scheduled',
            price: 200,
            created: new Date().toISOString()
          }
        ];
        localStorage.setItem('ptpAdminSessions', JSON.stringify(sampleSessions));
      }

      // Clients data
      if (!localStorage.getItem('ptpAdminClients')) {
        const sampleClients = [
          {
            id: 'client_1',
            name: 'Sarah Johnson',
            email: 'sarah.johnson@email.com',
            phone: '(303) 555-0123',
            address: '123 Main St, Denver, CO 80206',
            pets: [
              { name: 'Buffy', age: 3, breed: 'Golden Retriever', gender: 'Female' },
              { name: 'Max', age: 5, breed: 'Labrador', gender: 'Male' }
            ],
            totalSessions: 1,
            totalSpent: 250,
            lastSession: '2024-12-22',
            created: new Date().toISOString()
          },
          {
            id: 'client_2',
            name: 'Mike Chen',
            email: 'mike.chen@email.com',
            phone: '(303) 555-0456',
            address: '456 Oak Ave, Denver, CO 80210',
            pets: [
              { name: 'Rocky', age: 2, breed: 'German Shepherd', gender: 'Male' }
            ],
            totalSessions: 2,
            totalSpent: 300,
            lastSession: '2024-12-23',
            created: new Date().toISOString()
          }
        ];
        localStorage.setItem('ptpAdminClients', JSON.stringify(sampleClients));
      }

      // Galleries data
      if (!localStorage.getItem('ptpAdminGalleries')) {
        const sampleGalleries = [
          {
            id: 'gallery_1',
            name: 'Sarah Johnson - Full Session',
            sessionId: 'session_1',
            clientId: 'client_1',
            sessionDate: '2024-12-22',
            status: 'pending',
            accessId: '0123',
            password: 'buffybarks',
            photos: [],
            totalPhotos: 0,
            views: 0,
            downloads: 0,
            created: new Date().toISOString()
          },
          {
            id: 'gallery_2',
            name: 'Mike Chen - Mini Session',
            sessionId: 'session_2',
            clientId: 'client_2',
            sessionDate: '2024-12-20',
            status: 'active',
            accessId: '0456',
            password: 'rockybarks',
            photos: Array(15).fill().map((_, i) => ({
              id: `photo_${i + 1}`,
              filename: `rocky_session_${i + 1}.jpg`,
              title: `Rocky Photo ${i + 1}`,
              description: '',
              uploaded: new Date().toISOString()
            })),
            totalPhotos: 15,
            views: 24,
            downloads: 5,
            created: new Date().toISOString()
          }
        ];
        localStorage.setItem('ptpAdminGalleries', JSON.stringify(sampleGalleries));
      }

      updateDashboardStats();
      updateBadges();
    }

    // Get data from localStorage
    function getData(type) {
      const data = localStorage.getItem(`ptpAdmin${type}`);
      return data ? JSON.parse(data) : [];
    }

    // Save data to localStorage
    function saveData(type, data) {
      localStorage.setItem(`ptpAdmin${type}`, JSON.stringify(data));
      updateDashboardStats();
      updateBadges();
      broadcastDataUpdate(type, data);
    }

    // Broadcast data updates to other pages (simulate real-time sync)
    function broadcastDataUpdate(type, data) {
      window.localStorage.setItem('ptpAdminLastUpdate', Date.now());
      window.dispatchEvent(new CustomEvent('ptpDataUpdate', { 
        detail: { type, data } 
      }));
    }

    // Listen for data updates from other pages
    window.addEventListener('storage', function(e) {
      if (e.key === 'ptpAdminLastUpdate') {
        updateDashboardStats();
        updateBadges();
        showNotification('üì° Data updated from another page', 'info');
      }
    });

    // ===== DASHBOARD FUNCTIONS =====
    
    function updateDashboardStats() {
      const sessions = getData('Sessions');
      const clients = getData('Clients');
      const galleries = getData('Galleries');
      
      // Calculate monthly sessions
      const currentMonth = new Date().getMonth();
      const currentYear = new Date().getFullYear();
      const monthlySessions = sessions.filter(session => {
        const sessionDate = new Date(session.date);
        return sessionDate.getMonth() === currentMonth && sessionDate.getFullYear() === currentYear;
      });
      
      // Calculate monthly revenue
      const monthlyRevenue = monthlySessions.reduce((total, session) => total + (session.price || 0), 0);
      
      // Active galleries (non-pending)
      const activeGalleries = galleries.filter(gallery => gallery.status === 'active').length;
      
      // Update DOM
      document.getElementById('monthlySessionsCount').textContent = monthlySessions.length;
      document.getElementById('monthlyRevenue').textContent = `$${monthlyRevenue.toLocaleString()}`;
      document.getElementById('activeGalleriesCount').textContent = activeGalleries;
      document.getElementById('totalClientsCount').textContent = clients.length;
    }

    function updateBadges() {
      const sessions = getData('Sessions');
      const galleries = getData('Galleries');
      
      // Calendar badge - upcoming sessions this week
      const nextWeek = new Date();
      nextWeek.setDate(nextWeek.getDate() + 7);
      const upcomingSessions = sessions.filter(session => {
        const sessionDate = new Date(session.date);
        return sessionDate >= new Date() && sessionDate <= nextWeek;
      }).length;
      
      // Gallery badge - active galleries
      const activeGalleries = galleries.filter(gallery => gallery.status === 'active').length;
      
      document.getElementById('calendarBadge').textContent = upcomingSessions;
      document.getElementById('galleryBadge').textContent = activeGalleries;
    }

    // ===== UI FUNCTIONS =====
    
    function refreshSessions() {
      showNotification('üìÖ Sessions refreshed', 'success');
      // In a real app, this would fetch fresh data from the server
    }

    function refreshActions() {
      showNotification('üìã Actions refreshed', 'success');
      // In a real app, this would fetch fresh pending actions
    }

    function markAllComplete() {
      showNotification('‚úÖ All actions marked as complete', 'success');
      // In a real app, this would update action statuses
    }

    function createBackup() {
      const allData = {
        sessions: getData('Sessions'),
        clients: getData('Clients'),
        galleries: getData('Galleries'),
        exported: new Date().toISOString()
      };
      
      const dataStr = JSON.stringify(allData, null, 2);
      const dataBlob = new Blob([dataStr], { type: 'application/json' });
      const url = URL.createObjectURL(dataBlob);
      
      const link = document.createElement('a');
      link.href = url;
      link.download = `ptp-backup-${new Date().toISOString().split('T')[0]}.json`;
      link.click();
      
      showNotification('üíæ Backup created and downloaded', 'success');
    }

    function sendReminders() {
      const sessions = getData('Sessions');
      const tomorrow = new Date();
      tomorrow.setDate(tomorrow.getDate() + 1);
      
      const tomorrowSessions = sessions.filter(session => {
        const sessionDate = new Date(session.date);
        return sessionDate.toDateString() === tomorrow.toDateString();
      });
      
      if (tomorrowSessions.length > 0) {
        showNotification(`üìß Reminders sent to ${tomorrowSessions.length} clients`, 'success');
      } else {
        showNotification('üìß No sessions tomorrow - no reminders needed', 'info');
      }
    }

    // ===== UTILITY FUNCTIONS =====
    
    function showNotification(message, type = 'info') {
      const notification = document.createElement('div');
      notification.className = `notification ${type}`;
      notification.textContent = message;
      
      document.body.appendChild(notification);
      
      setTimeout(() => notification.classList.add('show'), 100);
      
      setTimeout(() => {
        notification.classList.remove('show');
        setTimeout(() => notification.remove(), 300);
      }, 3000);
    }

    function toggleSidebar() {
      const sidebar = document.getElementById('adminSidebar');
      sidebar.classList.toggle('open');
    }

    // ===== AUTHENTICATION =====
    
    function checkAuthentication() {
      const isAuthenticated = localStorage.getItem('adminAuthenticated');
      const loginTime = localStorage.getItem('adminLoginTime');
      const adminUser = localStorage.getItem('adminUser');
      
      if (!isAuthenticated || !loginTime || !adminUser) {
        window.location.href = '/admin-login.html';
        return false;
      }
      
      const loginDate = new Date(loginTime);
      const now = new Date();
      const hoursDiff = (now - loginDate) / (1000 * 60 * 60);
      
      if (hoursDiff >= 24) {
        logout();
        return false;
      }
      
      document.getElementById('adminUser').textContent = `Welcome, ${adminUser}`;
      return true;
    }

    function logout() {
      localStorage.removeItem('adminAuthenticated');
      localStorage.removeItem('adminUser');
      localStorage.removeItem('adminLoginTime');
      window.location.href = '/admin-login.html';
    }

    // ===== INITIALIZATION =====
    
    document.addEventListener('DOMContentLoaded', function() {
      console.log('Picture This Pet Admin Dashboard loading...');
      
      if (!checkAuthentication()) {
        return;
      }
      
      // Initialize data and UI
      initializeData();
      
      // Show welcome message
      setTimeout(() => {
        showNotification('üéâ Welcome to your Studio Manager!', 'success');
      }, 1000);
    });

    // Responsive handling
    window.addEventListener('resize', function() {
      if (window.innerWidth > 1024) {
        document.getElementById('adminSidebar').classList.remove('open');
      }
    });

    // Keyboard shortcuts
    document.addEventListener('keydown', function(e) {
      if (e.ctrlKey || e.metaKey) {
        switch(e.key) {
          case 'b':
            e.preventDefault();
            createBackup();
            break;
          case 'r':
            e.preventDefault();
            location.reload();
            break;
        }
      }
    });
  </script>
</body>
</html>
